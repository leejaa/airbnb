{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useCallback } from \"react\";\nimport RoomCard from \"./RoomCard\";\nimport { useSelectRoomsQuery } from \"../generated/graphql\";\n\nconst RoomList = ({}) => {\n  const {\n    data,\n    loading,\n    fetchMore,\n    networkStatus,\n    refetch\n  } = useSelectRoomsQuery({\n    variables: {\n      skip: 0,\n      take: 12\n    },\n    notifyOnNetworkStatusChange: true\n  });\n\n  if (!data) {\n    return __jsx(\"div\", null, \"\\uB85C\\uB529\\uC911...\");\n  }\n\n  const onScroll = useCallback(() => {\n    if (window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 10) {\n      fetchMore({\n        variables: {\n          skip: data.selectRooms.length,\n          take: data.selectRooms.length + 4\n        },\n        updateQuery: (pv, {\n          fetchMoreResult\n        }) => {\n          if (!fetchMoreResult) {\n            return pv;\n          }\n\n          return {\n            // __typename: \"Room\",\n            selectRooms: [...pv.selectRooms, ...fetchMoreResult.selectRooms]\n          };\n        }\n      });\n    }\n  }, [data.selectRooms.length]);\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll);\n    return () => {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [data.selectRooms.length]);\n  return __jsx(\"div\", {\n    className: \"container mx-auto pb-10\"\n  }, __jsx(\"div\", {\n    className: \"rounded-xl -mx-40 h-50vh mb-24 bg-cover bg-center\"\n  }, __jsx(\"div\", {\n    className: \"flex flex-wrap mx-5 my-16 mb-10 mt-24\"\n  }, data.selectRooms.map((room, i) => __jsx(RoomCard, {\n    room: room,\n    key: room.id\n  })))));\n};\n\nexport default RoomList;","map":null,"metadata":{},"sourceType":"module"}