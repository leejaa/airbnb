{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _objectDestructuringEmpty from \"@babel/runtime-corejs2/helpers/esm/objectDestructuringEmpty\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Formik, Field, Form } from \"formik\";\nimport * as yup from \"yup\";\nimport Link from \"next/link\";\nimport { useLoginMutation, MeDocument } from \"../generated/graphql\";\nvar validationSchema = yup.object({\n  email: yup.string().email().required(),\n  password: yup.string().required()\n});\n\nvar Login = function Login(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var _useLoginMutation = useLoginMutation(),\n      _useLoginMutation2 = _slicedToArray(_useLoginMutation, 1),\n      login = _useLoginMutation2[0];\n\n  return __jsx(\"div\", {\n    className: \"container lg:w-5/12 md:w-1/4 mx-auto my-16 flex flex-col items-center border p-6 border-gray-400\"\n  }, __jsx(\"div\", {\n    className: \"flex flex-col w-full\"\n  }, __jsx(\"a\", {\n    href: \"\",\n    className: \"btn border-2  text-gray-700 mb-2 border-gray-700 font-medium\"\n  }, __jsx(\"i\", {\n    className: \"fab fa-github-alt mr-2 fa-lg\"\n  }), \" \\uAE43\\uD5C8\\uBE0C \\uB85C\\uADF8\\uC778\"), __jsx(\"a\", {\n    href: \"{% url 'users:kakao-login' %}\",\n    className: \"btn border text-yellow-800 mb-2 border-yellow-400 bg-yellow-400 font-medium\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-comment mr-2 fa-lg\"\n  }), \" \\uCE74\\uCE74\\uC624 \\uB85C\\uADF8\\uC778\")), __jsx(Formik, {\n    validateOnChange: true,\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validationSchema: validationSchema,\n    onSubmit: function _callee(data, _ref2) {\n      var _response$data, _response$data$login;\n\n      var setSubmitting, response;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmitting = _ref2.setSubmitting;\n              setSubmitting(true);\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(login({\n                variables: {\n                  email: data.email || \"\",\n                  password: data.password || \"\"\n                },\n                update: function update(store, _ref3) {\n                  var data = _ref3.data;\n\n                  if (!data) {\n                    return null;\n                  }\n\n                  store.writeQuery({\n                    query: MeDocument,\n                    data: {\n                      me: data.login.user\n                    }\n                  });\n                  return null;\n                }\n              }));\n\n            case 4:\n              response = _context.sent;\n              console.log('response', response);\n              document.cookie = \"jid=\".concat(response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$login = _response$data.login) === null || _response$data$login === void 0 ? void 0 : _response$data$login.refreshToken);\n              window.location.href = '/';\n              setSubmitting(false);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }, function (_ref4) {\n    var values = _ref4.values,\n        errors = _ref4.errors,\n        isSubmitting = _ref4.isSubmitting;\n    return __jsx(Form, {\n      className: \"w-full\"\n    }, __jsx(\"span\", {\n      className: \"text-red-700 font-medium text-sm\"\n    }, \"\".concat(_JSON$stringify(errors))), __jsx(Field, {\n      placeholder: \"\\uC774\\uBA54\\uC77C\\uC8FC\\uC18C\",\n      name: \"email\",\n      type: \"input\",\n      className: \"mb-3\"\n    }), __jsx(Field, {\n      placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      name: \"password\",\n      type: \"password\",\n      className: \"mb-3\"\n    }), __jsx(\"button\", {\n      className: \"btn bg-red-500 text-white font-medium\",\n      type: \"submit\"\n    }, \"\\uBC84\\uD2BC\"));\n  }), __jsx(\"div\", {\n    className: \"mt-5\"\n  }, __jsx(\"span\", {\n    className: \"mt-2\"\n  }, \"\\uACC4\\uC815\\uC774 \\uC5C6\\uB2E4\\uBA74?\"), __jsx(Link, {\n    href: \"/join\"\n  }, __jsx(\"a\", {\n    href: \"\",\n    className: \"text-teal-500 font-medium\"\n  }, \"\\uD68C\\uC6D0\\uAC00\\uC785\"))));\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}