{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectDestructuringEmpty from \"@babel/runtime-corejs2/helpers/esm/objectDestructuringEmpty\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useCallback } from \"react\";\nimport RoomCard from \"./RoomCard\";\nimport { useSelectRoomsQuery } from \"../generated/graphql\";\n\nvar RoomList = function RoomList(_ref) {\n  _objectDestructuringEmpty(_ref);\n\n  var _useSelectRoomsQuery = useSelectRoomsQuery({\n    variables: {\n      skip: 0,\n      take: 12\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useSelectRoomsQuery.data,\n      loading = _useSelectRoomsQuery.loading,\n      fetchMore = _useSelectRoomsQuery.fetchMore,\n      networkStatus = _useSelectRoomsQuery.networkStatus,\n      refetch = _useSelectRoomsQuery.refetch;\n\n  if (!data) {\n    return __jsx(\"div\", null, \"\\uB85C\\uB529\\uC911...\");\n  }\n\n  var onScroll = useCallback(function () {\n    if (window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 10) {\n      fetchMore({\n        variables: {\n          skip: data.selectRooms.length,\n          take: data.selectRooms.length + 4\n        },\n        updateQuery: function updateQuery(pv, _ref2) {\n          var fetchMoreResult = _ref2.fetchMoreResult;\n\n          if (!fetchMoreResult) {\n            return pv;\n          }\n\n          return {\n            // __typename: \"Room\",\n            selectRooms: [].concat(_toConsumableArray(pv.selectRooms), _toConsumableArray(fetchMoreResult.selectRooms))\n          };\n        }\n      });\n    }\n  }, [data.selectRooms.length]);\n  useEffect(function () {\n    window.addEventListener('scroll', onScroll);\n    return function () {\n      window.removeEventListener('scroll', onScroll);\n    };\n  }, [data.selectRooms.length]);\n  return __jsx(\"div\", {\n    className: \"container mx-auto pb-10\"\n  }, __jsx(\"div\", {\n    className: \"rounded-xl -mx-40 h-50vh mb-24 bg-cover bg-center\"\n  }, __jsx(\"div\", {\n    className: \"flex flex-wrap mx-5 my-16 mb-10 mt-24\"\n  }, data.selectRooms.map(function (room, i) {\n    return __jsx(RoomCard, {\n      room: room,\n      key: room.id\n    });\n  }))));\n};\n\nexport default RoomList;","map":null,"metadata":{},"sourceType":"module"}