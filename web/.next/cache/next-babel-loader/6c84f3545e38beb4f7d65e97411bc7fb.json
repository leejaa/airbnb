{"ast":null,"code":"var _jsxFileName = \"/Users/leejahun/practice/airbnb/web/components/Calendar2.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useMemo } from \"react\";\nimport { ArrowRightOutlined, ArrowLeftOutlined } from '@ant-design/icons';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../assets/scss/room.scss';\nimport * as Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport _ from \"lodash\";\nimport { getDates } from \"../utils/utils\";\nvar moment = extendMoment(Moment);\nmoment.locale('ko');\nvar DAY_LIST = [\"일요일\", \"월요일\", \"화요일\", \"수요일\", \"목요일\", \"금요일\", \"토요일\"];\n\nvar Calendars2 = function Calendars2(_ref) {\n  var room = _ref.room,\n      setCheckin = _ref.setCheckin,\n      setCheckout = _ref.setCheckout;\n\n  var _useState = useState(moment()),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  var _useState2 = useState([]),\n      selectedDate = _useState2[0],\n      setSelectedDate = _useState2[1];\n\n  var disableDate = useMemo(function () {\n    var disableDate = getDates({\n      startDate: moment().startOf('month').format('YYYY-MM-DD'),\n      endDate: moment().add(-1, 'day')\n    });\n    disableDate.push(room === null || room === void 0 ? void 0 : room.reservation.map(function (item) {\n      return item.check_in;\n    }));\n    disableDate = _.uniq(_.flatten(disableDate));\n    return disableDate;\n  }, []);\n  var dates = useMemo(function () {\n    var dates = getDates({\n      startDate: date.startOf('month').format('YYYY-MM-DD'),\n      endDate: date.endOf('month')\n    });\n    return dates;\n  }, [date]);\n  var onClickDate = useCallback(function (date) {\n    var startDate = '';\n    var endDate = '';\n\n    if (_.isEmpty(selectedDate) || _.includes(selectedDate, date)) {\n      startDate = date;\n      endDate = date;\n    } else {\n      startDate = _.minBy(selectedDate);\n      endDate = _.maxBy(selectedDate);\n\n      if (startDate > date) {\n        endDate = _.clone(startDate);\n        startDate = date;\n      }\n\n      if (endDate < date) {\n        startDate = _.clone(endDate);\n        endDate = date;\n      }\n    }\n\n    var newSelectedDate = getDates({\n      startDate: startDate,\n      endDate: endDate\n    });\n    setSelectedDate(newSelectedDate);\n    setCheckin(startDate);\n    setCheckout(endDate);\n  }, [selectedDate]);\n  var renderCell = useMemo(function () {\n    var cnt = 0;\n    return __jsx(\"div\", {\n      className: \"calendar2-container6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"calendar2-container8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, _.range(0, 7).map(function (index) {\n      var currentDate = moment(dates[cnt]).format('YYYY-MM-DD');\n\n      if (index < _.indexOf(DAY_LIST, moment(dates[0]).format('dddd'))) {\n        return __jsx(\"div\", {\n          className: \"calendar2-container9\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        });\n      } else if (_.includes(disableDate, moment(dates[cnt]).format('YYYY-MM-DD'))) {\n        return __jsx(\"div\", {\n          className: \"calendar2-container7\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, __jsx(\"span\", {\n          className: \"calendar2-span2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, __jsx(\"del\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, moment(dates[cnt++]).format('D'))));\n      } else if (_.includes(selectedDate, moment(dates[cnt]).format('YYYY-MM-DD'))) {\n        return __jsx(\"div\", {\n          className: \"calendar2-container10\",\n          onClick: function onClick() {\n            return onClickDate(currentDate);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, __jsx(\"span\", {\n          className: \"calendar2-span3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, moment(dates[cnt++]).format('D')));\n      } else {\n        return __jsx(\"div\", {\n          className: \"calendar2-container7\",\n          onClick: function onClick() {\n            return onClickDate(currentDate);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, __jsx(\"span\", {\n          className: \"calendar2-span1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, moment(dates[cnt++]).format('D')));\n      }\n    })), _.range(1, 6).map(function (index) {\n      if (cnt < dates.length) {\n        return __jsx(\"div\", {\n          className: \"calendar2-container8\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, _.range(0, 7).map(function (index) {\n          var currentDate = moment(dates[cnt]).format('YYYY-MM-DD');\n\n          if (cnt >= dates.length) {\n            return __jsx(\"div\", {\n              className: \"calendar2-container9\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            });\n          } else if (_.includes(disableDate, moment(dates[cnt]).format('YYYY-MM-DD'))) {\n            return __jsx(\"div\", {\n              className: \"calendar2-container7\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113\n              },\n              __self: this\n            }, __jsx(\"span\", {\n              className: \"calendar2-span2\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114\n              },\n              __self: this\n            }, __jsx(\"del\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }, moment(dates[cnt++]).format('D'))));\n          } else if (_.includes(selectedDate, moment(dates[cnt]).format('YYYY-MM-DD'))) {\n            return __jsx(\"div\", {\n              className: \"calendar2-container10\",\n              onClick: function onClick() {\n                return onClickDate(currentDate);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 121\n              },\n              __self: this\n            }, __jsx(\"span\", {\n              className: \"calendar2-span3\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 122\n              },\n              __self: this\n            }, moment(dates[cnt++]).format('D')));\n          } else {\n            return __jsx(\"div\", {\n              className: \"calendar2-container7\",\n              onClick: function onClick() {\n                return onClickDate(currentDate);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 129\n              },\n              __self: this\n            }, __jsx(\"span\", {\n              className: \"calendar2-span1\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 130\n              },\n              __self: this\n            }, moment(dates[cnt++]).format('D')));\n          }\n        }));\n      } else {\n        return null;\n      }\n    }));\n  }, [date, selectedDate, disableDate]);\n  var goLeft = useCallback(function () {\n    var newDate = _.clone(date).add(-1, 'day');\n\n    setDate(newDate);\n  }, [date]);\n  var goRight = useCallback(function () {\n    var newDate = _.clone(date).add(1, 'day');\n\n    setDate(newDate);\n  }, [date]);\n  return __jsx(\"div\", {\n    className: \"calendar2-container1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"calendar2-container2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"calendar2-container3\",\n    onClick: goLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, __jsx(ArrowLeftOutlined, {\n    style: {\n      fontSize: '18px',\n      color: '#9ca1a2'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"calendar2-container4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold',\n      fontSize: '1em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"\".concat(date.format('YYYY'), \"\\uB144 \").concat(date.format('M'), \"\\uC6D4\"))), __jsx(\"div\", {\n    className: \"calendar2-container3\",\n    onClick: goRight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, __jsx(ArrowRightOutlined, {\n    style: {\n      fontSize: '18px',\n      color: '#9ca1a2'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"calendar2-container5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, \"\\uC77C\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"\\uC6D4\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"\\uD654\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"\\uC218\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"\\uBAA9\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"\\uAE08\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"\\uD1A0\")), renderCell);\n};\n\nexport default Calendars2;","map":{"version":3,"sources":["/Users/leejahun/practice/airbnb/web/components/Calendar2.tsx"],"names":["React","useState","useCallback","useMemo","ArrowRightOutlined","ArrowLeftOutlined","Moment","extendMoment","_","getDates","moment","locale","DAY_LIST","Calendars2","room","setCheckin","setCheckout","date","setDate","selectedDate","setSelectedDate","disableDate","startDate","startOf","format","endDate","add","push","reservation","map","item","check_in","uniq","flatten","dates","endOf","onClickDate","isEmpty","includes","minBy","maxBy","clone","newSelectedDate","renderCell","cnt","range","index","currentDate","indexOf","length","goLeft","newDate","goRight","fontSize","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useCallback, useMemo } from \"react\";\nimport { RightOutlined, LeftOutlined, ArrowRightOutlined, ArrowLeftOutlined } from '@ant-design/icons';\nimport { Calendar } from 'antd';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Room } from \"../generated/graphql\";\nimport '../assets/scss/room.scss';\nimport * as Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nimport _ from \"lodash\";\nimport { getDates } from \"../utils/utils\"\nlet moment = extendMoment(Moment);\nmoment.locale('ko');\ntype Props = {\n    room: Room,\n    setCheckin: any,\n    setCheckout: any\n};\nconst DAY_LIST = [\"일요일\", \"월요일\", \"화요일\", \"수요일\", \"목요일\", \"금요일\", \"토요일\"];\nconst Calendars2: React.FunctionComponent<Props> = ({\n    room,\n    setCheckin,\n    setCheckout,\n}) => {\n    const [date, setDate] = useState(moment());\n    const [selectedDate, setSelectedDate] = useState([]);\n    const disableDate = useMemo(() => {\n        let disableDate : any = getDates({ startDate: moment().startOf('month').format('YYYY-MM-DD'), endDate: moment().add(-1, 'day') });\n        disableDate.push(room?.reservation.map(item => item.check_in));\n        disableDate = _.uniq(_.flatten(disableDate));\n        return disableDate;\n    }, []);\n    const dates = useMemo(() => {\n        const dates = getDates({ startDate: date.startOf('month').format('YYYY-MM-DD'), endDate: date.endOf('month') });\n        return dates;\n    }, [date]);\n    const onClickDate = useCallback((date) => {\n        let startDate : any = '';\n        let endDate : any = '';\n        if ( _.isEmpty(selectedDate) || _.includes(selectedDate, date) ) {\n            startDate = date;\n            endDate = date;\n        } else {\n            startDate = _.minBy(selectedDate);\n            endDate = _.maxBy(selectedDate);\n            if (startDate > date) {\n                endDate = _.clone(startDate);\n                startDate = date;\n            }\n            if (endDate < date) {\n                startDate = _.clone(endDate);\n                endDate = date;\n            }\n        }\n        const newSelectedDate : any = getDates({ startDate, endDate });\n        setSelectedDate(newSelectedDate);\n        setCheckin(startDate);\n        setCheckout(endDate);\n    }, [selectedDate]);\n    const renderCell = useMemo(() => {\n        let cnt = 0;\n        return (\n            <div className=\"calendar2-container6\">\n                <div className=\"calendar2-container8\">\n                    {\n                        _.range(0, 7).map(index => {\n                            const currentDate = moment(dates[cnt]).format('YYYY-MM-DD');\n                            if (index < _.indexOf(DAY_LIST, moment(dates[0]).format('dddd'))) {\n                                return (\n                                    <div className=\"calendar2-container9\"></div>\n                                );\n                            } else if ( _.includes(disableDate, moment(dates[cnt]).format('YYYY-MM-DD')) ) {\n                                return (\n                                    <div className=\"calendar2-container7\">\n                                        <span className=\"calendar2-span2\">\n                                            <del>{moment(dates[cnt++]).format('D')}</del>\n                                        </span>\n                                    </div>\n                                );\n                            } else if ( _.includes(selectedDate, moment(dates[cnt]).format('YYYY-MM-DD')) ) {\n                                return (\n                                    <div className=\"calendar2-container10\" onClick={() => onClickDate(currentDate)}>\n                                        <span className=\"calendar2-span3\">\n                                            {moment(dates[cnt++]).format('D')}\n                                        </span>\n                                    </div>\n                                );\n                            } else { \n                                return (\n                                    <div className=\"calendar2-container7\" onClick={() => onClickDate(currentDate)}>\n                                        <span className=\"calendar2-span1\">\n                                            {moment(dates[cnt++]).format('D')}\n                                        </span>\n                                    </div>\n                                );\n                            }\n                        })\n                    }\n                </div>\n                {\n                    _.range(1, 6).map(index => {\n                        if (cnt < dates.length) {\n                            return (\n                                <div className=\"calendar2-container8\">\n                                    {\n                                        _.range(0, 7).map(index => {\n                                            const currentDate = moment(dates[cnt]).format('YYYY-MM-DD');\n                                            if (cnt >= dates.length) {\n                                                return (\n                                                    <div className=\"calendar2-container9\"></div>\n                                                );\n                                            } else if ( _.includes(disableDate, moment(dates[cnt]).format('YYYY-MM-DD')) ) {\n                                                return (\n                                                    <div className=\"calendar2-container7\">\n                                                        <span className=\"calendar2-span2\">\n                                                            <del>{moment(dates[cnt++]).format('D')}</del>\n                                                        </span>\n                                                    </div>\n                                                );\n                                            } else if ( _.includes(selectedDate, moment(dates[cnt]).format('YYYY-MM-DD')) ) {\n                                                return (\n                                                    <div className=\"calendar2-container10\" onClick={() => onClickDate(currentDate)}>\n                                                        <span className=\"calendar2-span3\">\n                                                            {moment(dates[cnt++]).format('D')}\n                                                        </span>\n                                                    </div>\n                                                );\n                                            }  else {\n                                                return (\n                                                    <div className=\"calendar2-container7\" onClick={() => onClickDate(currentDate)}>\n                                                        <span className=\"calendar2-span1\">\n                                                            {moment(dates[cnt++]).format('D')}\n                                                        </span>\n                                                    </div>\n                                                );\n                                            }\n                                        })\n                                    }\n                                </div>\n                            );\n                        } else {\n                            return null;\n                        }\n                    })\n                }\n            </div>\n        );\n    }, [date, selectedDate, disableDate]);\n    const goLeft = useCallback(() => {\n        const newDate : any = _.clone(date).add(-1, 'day');\n        setDate(newDate);\n    }, [date]);\n    const goRight = useCallback(() => {\n        const newDate : any = _.clone(date).add(1, 'day');\n        setDate(newDate);\n    }, [date]);\n    return (\n        <div className=\"calendar2-container1\">\n            <div className=\"calendar2-container2\">\n                <div className=\"calendar2-container3\" onClick={goLeft}>\n                    <ArrowLeftOutlined style={{ fontSize: '18px', color: '#9ca1a2' }} />\n                </div>\n                <div className=\"calendar2-container4\">\n                    <span style={{ fontWeight: 'bold', fontSize: '1em' }}>{`${date.format('YYYY')}년 ${date.format('M')}월`}</span>\n                </div>\n                <div className=\"calendar2-container3\" onClick={goRight}>\n                    <ArrowRightOutlined style={{ fontSize: '18px', color: '#9ca1a2' }} />\n                </div>\n            </div>\n            <div className=\"calendar2-container5\">\n                <div>일</div>\n                <div>월</div>\n                <div>화</div>\n                <div>수</div>\n                <div>목</div>\n                <div>금</div>\n                <div>토</div>\n            </div>\n            {renderCell}\n        </div>\n    );\n}\n\nexport default Calendars2;"]},"metadata":{},"sourceType":"module"}