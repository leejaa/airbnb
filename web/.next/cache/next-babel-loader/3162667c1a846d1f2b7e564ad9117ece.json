{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"/Users/leejahun/practice/airbnb/web/pages/roomDetail.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useMemo, useRef, useEffect } from \"react\";\nimport { useRouter } from 'next/router';\nimport 'antd/dist/antd.css';\nimport '../assets/scss/room.scss';\nimport RoomdetailPicture from \"../components/RoomdetailPicture\";\nimport { useSelectRoomQuery } from \"../generated/graphql\";\nimport Calendars from \"../components/Calendar\";\nimport { StarFilled, SearchOutlined, CloseOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Review from \"../components/Review\";\nimport _ from \"lodash\";\n\nconst isServer = () => true;\n\nconst initialHeight = 800;\nexport default (() => {\n  var _router$query, _data$selectRoom4, _data$selectRoom5, _data$selectRoom6, _data$selectRoom6$use, _data$selectRoom7, _data$selectRoom8, _data$selectRoom9, _data$selectRoom10, _data$selectRoom11, _data$selectRoom12, _data$selectRoom13;\n\n  const {\n    0: startPage,\n    1: setStartPge\n  } = useState(0);\n  const {\n    0: endPage,\n    1: setEndPage\n  } = useState(4);\n  const {\n    0: searchword,\n    1: setSearchword\n  } = useState('');\n  let mapRef = useRef();\n  let mapContainerRef = useRef();\n  const router = useRouter();\n  const {\n    data,\n    loading\n  } = useSelectRoomQuery({\n    variables: {\n      id: _parseInt(router === null || router === void 0 ? void 0 : (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.id)\n    }\n  });\n  const initialReviews = useMemo(() => {\n    var _data$selectRoom;\n\n    const reviews = data === null || data === void 0 ? void 0 : (_data$selectRoom = data.selectRoom) === null || _data$selectRoom === void 0 ? void 0 : _data$selectRoom.reviews;\n    return reviews;\n  }, [data]);\n  const {\n    0: reviews,\n    1: setReviews\n  } = useState(initialReviews || []);\n  const onChangeWord = useCallback(e => {\n    setSearchword(e.target.value);\n  }, [searchword]);\n  const onKeyPress = useCallback(e => {\n    if (searchword === '') {\n      var _data$selectRoom2;\n\n      setReviews(data === null || data === void 0 ? void 0 : (_data$selectRoom2 = data.selectRoom) === null || _data$selectRoom2 === void 0 ? void 0 : _data$selectRoom2.reviews);\n      return;\n    }\n\n    if (e.which == 13 && searchword !== '') {\n      var _data$selectRoom3;\n\n      let newReviews = _.clone(reviews);\n\n      newReviews = _.filter(data === null || data === void 0 ? void 0 : (_data$selectRoom3 = data.selectRoom) === null || _data$selectRoom3 === void 0 ? void 0 : _data$selectRoom3.reviews, o => {\n        return _.includes(o.review, searchword);\n      });\n      setReviews(newReviews);\n    }\n  }, [searchword, reviews]);\n  const pageLeft = useCallback(() => {\n    const newStartPage = _.clone(startPage) - 5;\n    const newEndPage = _.clone(endPage) - 5;\n    setStartPge(newStartPage);\n    setEndPage(newEndPage);\n  }, [startPage, endPage]);\n  const pageRight = useCallback(() => {\n    const newStartPage = _.clone(startPage) + 5;\n    const newEndPage = _.clone(endPage) + 5;\n    setStartPge(newStartPage);\n    setEndPage(newEndPage);\n  }, [startPage, endPage]);\n  useEffect(() => {\n    const mapContainer = document.getElementById('map');\n    const options = {\n      center: new kakao.maps.LatLng(33.450701, 126.570667),\n      level: 3\n    };\n    mapRef = new kakao.maps.Map(mapContainerRef, options);\n    console.log('mapRef', mapRef);\n  }, []);\n\n  if (loading) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"\\uB85C\\uB529\\uC911...\");\n  }\n\n  return __jsx(\"div\", {\n    style: {\n      height: `${isServer() ? initialHeight : window.innerHeight}px`\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"roomdetail-container1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"roomdetail-container2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(RoomdetailPicture, {\n    room: data === null || data === void 0 ? void 0 : data.selectRoom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"roomdetail-container7\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"roomdetail-span2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom4 = data.selectRoom) === null || _data$selectRoom4 === void 0 ? void 0 : _data$selectRoom4.name), __jsx(\"div\", {\n    className: \"roomdetail-container8\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"roomdetail-span3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom5 = data.selectRoom) === null || _data$selectRoom5 === void 0 ? void 0 : _data$selectRoom5.city), __jsx(\"div\", {\n    className: \"roomdetail-container9\",\n    style: {\n      backgroundImage: `url('${data === null || data === void 0 ? void 0 : (_data$selectRoom6 = data.selectRoom) === null || _data$selectRoom6 === void 0 ? void 0 : (_data$selectRoom6$use = _data$selectRoom6.user) === null || _data$selectRoom6$use === void 0 ? void 0 : _data$selectRoom6$use.avatar}')`\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"roomdetail-container10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"\\uC124\\uBA85\")), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom7 = data.selectRoom) === null || _data$selectRoom7 === void 0 ? void 0 : _data$selectRoom7.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom8 = data.selectRoom) === null || _data$selectRoom8 === void 0 ? void 0 : _data$selectRoom8.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom9 = data.selectRoom) === null || _data$selectRoom9 === void 0 ? void 0 : _data$selectRoom9.description))), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"roomdetail-container12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"roomdetail-container11\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"\\uC774 \\uC124\\uBA85\\uC744 \\uD55C\\uAD6D\\uC5B4\\uB85C \\uBC88\\uC5ED\\uD558\\uAE30\")), __jsx(\"div\", {\n    style: {\n      marginTop: '5%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom10 = data.selectRoom) === null || _data$selectRoom10 === void 0 ? void 0 : _data$selectRoom10.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom11 = data.selectRoom) === null || _data$selectRoom11 === void 0 ? void 0 : _data$selectRoom11.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      fontWeight: \"lighter\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, data === null || data === void 0 ? void 0 : (_data$selectRoom12 = data.selectRoom) === null || _data$selectRoom12 === void 0 ? void 0 : _data$selectRoom12.description))), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"roomdetail-container13\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(Calendars, {\n    room: data === null || data === void 0 ? void 0 : data.selectRoom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"roomdetail-container14\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"roomdetail-span4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"\\uD6C4\\uAE30\")), __jsx(\"div\", {\n    className: \"roomdetail-container15\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, __jsx(StarFilled, {\n    style: {\n      fontSize: '15px',\n      color: '#008489',\n      marginTop: '2%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold',\n      color: '#008489'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"4.85\"), __jsx(\"span\", {\n    style: {\n      color: 'gray'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"|\"), __jsx(\"span\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"545 \\uD6C4\\uAE30\")), __jsx(\"div\", {\n    className: \"roomdetail-container16\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    className: \"roomdetail-input\",\n    placeholder: \"후기 검색\",\n    onChange: onChangeWord,\n    onKeyPress: onKeyPress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"roomdetail-container18\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, __jsx(CloseOutlined, {\n    style: {\n      fontSize: '20px',\n      color: '#ebebeb'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"roomdetail-container17\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, __jsx(SearchOutlined, {\n    style: {\n      fontSize: '20px',\n      color: 'gray'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"roomdetail-container19\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, reviews.slice(startPage, endPage).map(review => __jsx(Review, {\n    key: review.id,\n    review: review,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"roomdetail-container20\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, startPage !== 0 && __jsx(\"div\", {\n    className: \"roomdetail-container21\",\n    onClick: pageLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, __jsx(LeftOutlined, {\n    style: {\n      fontSize: '15px',\n      color: '#008489'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  })), ((data === null || data === void 0 ? void 0 : (_data$selectRoom13 = data.selectRoom) === null || _data$selectRoom13 === void 0 ? void 0 : _data$selectRoom13.reviews.length) || 0) >= endPage && __jsx(\"div\", {\n    className: \"roomdetail-container21\",\n    onClick: pageRight,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, __jsx(RightOutlined, {\n    style: {\n      fontSize: '15px',\n      color: '#008489'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }))))), __jsx(\"div\", {\n    className: \"roomdetail-container22\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"roomdetail-span4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"\\uC9C0\\uC5ED\\uC815\\uBCF4\")), __jsx(\"div\", {\n    className: \"roomdetail-container23\",\n    ref: mapContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }))));\n});","map":{"version":3,"sources":["/Users/leejahun/practice/airbnb/web/pages/roomDetail.tsx"],"names":["React","useState","useCallback","useMemo","useRef","useEffect","useRouter","RoomdetailPicture","useSelectRoomQuery","Calendars","StarFilled","SearchOutlined","CloseOutlined","LeftOutlined","RightOutlined","Review","_","isServer","initialHeight","startPage","setStartPge","endPage","setEndPage","searchword","setSearchword","mapRef","mapContainerRef","router","data","loading","variables","id","query","initialReviews","reviews","selectRoom","setReviews","onChangeWord","e","target","value","onKeyPress","which","newReviews","clone","filter","o","includes","review","pageLeft","newStartPage","newEndPage","pageRight","mapContainer","document","getElementById","options","center","kakao","maps","LatLng","level","Map","console","log","height","window","innerHeight","name","city","backgroundImage","user","avatar","fontWeight","description","marginTop","fontSize","color","slice","map","length"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useMemo, useRef, useEffect } from \"react\";\nimport { useRouter } from 'next/router';\nimport Cookie from \"js-cookie\";\nimport 'antd/dist/antd.css';\nimport { Carousel, Icon } from 'antd';\nimport Layout from \"../components/Layout\";\nimport '../assets/scss/room.scss';\nimport RoomList from \"../components/RoomList\";\nimport RoomdetailPicture from \"../components/RoomdetailPicture\";\nimport { useSelectRoomQuery } from \"../generated/graphql\";\nimport Calendars from \"../components/Calendar\";\nimport { StarFilled, SearchOutlined, CloseOutlined, LeftOutlined, RightOutlined } from \"@ant-design/icons\";\nimport Review from \"../components/Review\";\nimport _ from \"lodash\";\nconst isServer = () => typeof window === \"undefined\";\nconst initialHeight = 800;\ndeclare var kakao: any\nexport default () => {\n    const [startPage, setStartPge] = useState(0);\n    const [endPage, setEndPage] = useState(4);\n    const [searchword, setSearchword] = useState('');\n    let mapRef = useRef();\n    let mapContainerRef = useRef<any>();\n    const router: any = useRouter();\n    const { data, loading } = useSelectRoomQuery({\n        variables: {\n            id: parseInt(router?.query?.id)\n        }\n    });\n    const initialReviews = useMemo(() => {\n        const reviews = data?.selectRoom?.reviews;\n        return reviews;\n    }, [data]);\n    const [reviews, setReviews] = useState(initialReviews || []);\n    const onChangeWord = useCallback((e) => {\n        setSearchword(e.target.value);\n    }, [searchword]);\n    const onKeyPress = useCallback((e) => {\n        if (searchword === '') {\n            setReviews(data?.selectRoom?.reviews as any);\n            return;\n        }\n        if (e.which == 13 && searchword !== '') {\n            let newReviews = _.clone(reviews);\n            newReviews = _.filter(data?.selectRoom?.reviews, (o) => {\n                return _.includes(o.review, searchword);\n            });\n            setReviews(newReviews);\n        }\n    }, [searchword, reviews]);\n    const pageLeft = useCallback(() => {\n        const newStartPage = _.clone(startPage) - 5;\n        const newEndPage = _.clone(endPage) - 5;\n        setStartPge(newStartPage);\n        setEndPage(newEndPage);\n    }, [startPage, endPage]);\n    const pageRight = useCallback(() => {\n        const newStartPage = _.clone(startPage) + 5;\n        const newEndPage = _.clone(endPage) + 5;\n        setStartPge(newStartPage);\n        setEndPage(newEndPage);\n    }, [startPage, endPage]);\n    useEffect(() => {\n        const mapContainer = document.getElementById('map');\n        const options = {\n            center: new kakao.maps.LatLng(33.450701, 126.570667),\n            level: 3\n        };\n        mapRef = new kakao.maps.Map(mapContainerRef, options);\n        console.log('mapRef', mapRef);\n    }, []);\n    if (loading) {\n        return (\n            <div>로딩중...</div>\n        );\n    }\n    return (\n        <div style={{ height: `${isServer() ? initialHeight : window.innerHeight}px` }}>\n            <div className=\"roomdetail-container1\">\n\n            </div>\n            <div className=\"roomdetail-container2\">\n                <RoomdetailPicture room={data?.selectRoom as any} />\n            </div>\n            <div className=\"roomdetail-container7\">\n                <span className=\"roomdetail-span2\">{data?.selectRoom?.name}</span>\n                <div className=\"roomdetail-container8\">\n                    <span className=\"roomdetail-span3\">{data?.selectRoom?.city}</span>\n                    <div className=\"roomdetail-container9\" style={{ backgroundImage: `url('${data?.selectRoom?.user?.avatar}')` }}>\n                    </div>\n                </div>\n                <hr />\n                <div className=\"roomdetail-container10\">\n                    <div>\n                        <span style={{ fontWeight: 'bold' }}>설명</span>\n                    </div>\n                    <div>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                    <div>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                    <div>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                </div>\n                <hr />\n                <div className=\"roomdetail-container12\">\n                    <div className=\"roomdetail-container11\">\n                        <span>이 설명을 한국어로 번역하기</span>\n                    </div>\n                    <div style={{ marginTop: '5%' }}>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                    <div>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                    <div>\n                        <span style={{ fontWeight: \"lighter\" }}>{data?.selectRoom?.description}</span>\n                    </div>\n                </div>\n                <hr />\n                <div className=\"roomdetail-container13\">\n                    <Calendars room={data?.selectRoom as any} />\n                </div>\n                <div className=\"roomdetail-container14\">\n                    <div>\n                        <span className=\"roomdetail-span4\">후기</span>\n                    </div>\n                    <div className=\"roomdetail-container15\">\n                        <StarFilled style={{ fontSize: '15px', color: '#008489', marginTop: '2%' }} />\n                        <span style={{ fontWeight: 'bold', color: '#008489' }}>4.85</span>\n                        <span style={{ color: 'gray' }}>|</span>\n                        <span style={{ fontWeight: 'bold' }}>545 후기</span>\n                    </div>\n                    <div className=\"roomdetail-container16\">\n                        <input type=\"text\" className=\"roomdetail-input\" placeholder={\"후기 검색\"} onChange={onChangeWord} onKeyPress={onKeyPress} />\n                        <div className=\"roomdetail-container18\">\n                            <CloseOutlined style={{ fontSize: '20px', color: '#ebebeb' }} />\n                        </div>\n                        <div className=\"roomdetail-container17\">\n                            <SearchOutlined style={{ fontSize: '20px', color: 'gray' }} />\n                        </div>\n                    </div>\n                    <div className=\"roomdetail-container19\">\n                        {\n                            reviews.slice(startPage, endPage).map(review => (\n                                <Review key={review.id} review={review as any} />\n                            ))\n                        }\n                        <div className=\"roomdetail-container20\">\n                            {\n                                startPage !== 0 && (\n                                    <div className=\"roomdetail-container21\" onClick={pageLeft}>\n                                        <LeftOutlined style={{ fontSize: '15px', color: '#008489' }} />\n                                    </div>\n                                )\n                            }\n                            {\n                                (data?.selectRoom?.reviews.length || 0) >= endPage && (\n                                    <div className=\"roomdetail-container21\" onClick={pageRight}>\n                                        <RightOutlined style={{ fontSize: '15px', color: '#008489' }} />\n                                    </div>\n                                )\n                            }\n                        </div>\n                    </div>\n                </div>\n                <div className=\"roomdetail-container22\">\n                    <div>\n                        <span className=\"roomdetail-span4\">지역정보</span>\n                    </div>\n                    <div className=\"roomdetail-container23\" ref={mapContainerRef}>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}