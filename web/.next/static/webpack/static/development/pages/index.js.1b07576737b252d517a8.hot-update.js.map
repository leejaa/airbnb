{"version":3,"file":"static/webpack/static/development/pages/index.js.1b07576737b252d517a8.hot-update.js","sources":["webpack:///./components/RoomList.tsx"],"sourcesContent":["import { CircularProgress, List, ListItem, Paper } from \"@material-ui/core\";\nimport React, { useEffect, useCallback, useState, useRef } from \"react\";\nimport { Waypoint } from \"react-waypoint\";\nimport RoomCard from \"./RoomCard\";\nimport { useSelectRoomsQuery } from \"../generated/graphql\";\n\ntype Props = {\n};\n\nconst RoomList: React.FunctionComponent<Props> = ({\n\n}) => {\n    const { data, loading, fetchMore, networkStatus, refetch } = useSelectRoomsQuery({\n        variables: { skip: 0, take: 12 },\n        notifyOnNetworkStatusChange: true,\n    });\n    if (!data) {\n        return (\n            <div>로딩중...</div>\n        );\n    }\n    const onScroll = useCallback(() => {\n        if (window.scrollY + document.documentElement.clientHeight > document.documentElement.scrollHeight - 10) {\n            fetchMore({\n                variables: {\n                    skip: data.selectRooms.length,\n                    take: data.selectRooms.length + 4\n                },\n                updateQuery: (pv, { fetchMoreResult }) => {\n                    if (!fetchMoreResult) {\n                        return pv;\n                    }\n                    return {\n                        // __typename: \"Room\",\n                        selectRooms: [\n                            ...pv.selectRooms,\n                            ...fetchMoreResult.selectRooms\n                        ]\n                    };\n                }\n            });\n        }\n    }, [ data.selectRooms.length ]);\n    useEffect(() => {\n        window.addEventListener('scroll', onScroll);\n        return () => {\n          window.removeEventListener('scroll', onScroll);\n        };\n    }, [data.selectRooms.length]);\n    return (\n        <div className=\"container mx-auto pb-10\">\n            <div className=\"rounded-xl -mx-40 h-50vh mb-24 bg-cover bg-center\">\n                <div className=\"flex flex-wrap mx-5 my-16 mb-10 mt-24\">\n                    {\n                        data.selectRooms.map((room, i) => (\n                            <RoomCard room={room as any} key={ room.id }/>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default RoomList;"],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA;AAEA;AACA;AACA;AAIA;AAEA;AACA;AADA;AAEA;AAAA;AAAA;AAAA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAOA;AAhBA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAQA;AACA;AACA;;;;;;;;;;A","sourceRoot":""}